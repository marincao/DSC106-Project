<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pressure Map Visualization</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script defer src="script.js"></script>
</head>
<body>
    <h1>Pressure Map - In-bed Posture Visualization</h1>
    <h3>Group: Marin Cao, Ruofei Mao, Fiona Zou</h2>
<div id="top-controls">
    <div>
        <label for="fileSelector">Recording:</label>
        <select id="fileSelector"></select>
    </div>
    
    <div>
        <label for="frameSlider">Frame:</label>
        <input type="range" id="frameSlider" min="0" max="59" value="0">
        <span id="frameNumber">0</span>
    </div>

    <div id="postureLabel">Posture: Supine</div>
</div>


<div id="heatmap-legend-wrapper">
    <div id="heatmap-container">
      <div id="heatmap"></div>
      <div id="brush-toggle-container">
        <button id="brushToggle">Enable Brush</button>
      </div>
    </div>
    <div id="legend"></div>
  </div>
  <div id="brushInfo"><strong>Cells Selected: 0, Avg Pressure: 0.0</strong></div>

<div id="tooltip" class="hidden"></div>
<br></br>
<section id="writeup">
    <h2>Project Write-Up</h2>
  
    <h3>Design Rationale</h3>
    <p>Our goal was to create an intuitive visualization of sleep posture pressure across time using heatmaps, to better see the effect of different sleep posture to pressure. We chose a heatmap grid because it naturally supports spatially distributed numerical data like pressure, allowing viewers to quickly recognize patterns of intensity.</p>
    <p>For the style design, we applied a sequential color gradient(YlOrRd) to encode pressure on body maps. The light yellow indicates lowest pressure levels and dark red represents the highest pressure, with in-between color gradients. This color scheme was selected for because it's bright visually and easy for viewers to spot pressure changes. We considered alternatives like blue-red diverging scales but recognizes this color combination could imply polarity because of the color difference.</p>
    <p>For the interactive functions, we included a slider to control the time frame to capture change in posture, a dropdown to switch between recordings, and a enable/disable brushing tool to manually select a region and view average pressure (or, if brushing is disabled, it will simply be a hover effect for intereaction showing data on individual grids). This design allows readers to freely explore the dataset, choosing any number of grids they want and see the average pressure for different sleep postures. We also included a zoom-in/out function so that viewers can easily explore details of each frame. During the design process, we also thought of having two sleep graphs side-by-side for comparison, but realized it could be confusing if the two recorded postures are very different. Hence we went with our current design.</p>
  
    <h3>Development Process</h3>
    <p>We worked as a team of 3 members, splitting tasks across data loading, project checkpoint, building and refining the intereactive visualization, styling, and writeup. We collaborated via GitHub through the process and effective communication was made online in our groupchat.</p>
    <p>Everyone contributed to idea brainstorm. Everyone contributed to the testing, debugging, and formatting process, especially in fixing brush logic and formatting the application layout. Marin led the development of the interactive visualization, building the first full version of the heatmap with slider, hover effect and brush logic, spending a total of 6 hours for this application. Fiona produced the checkpoint video and spent a total of 4 hours for this application. Ruofei produced the writeup and spent a total of 4 hours for this application. </p>
    <p>The aspect that took us the most time was debugging brush logic and mouse hover effect: we couldn't get them to work at the same time, it was either the brush working perfectly while hover effect not showing, or hover intereaction worked with a dysfunctioned brush logic. This is one of the major reasons we decide to create a brush enabling button - we can separate out the conflicting brush and mouse hover effect with this design.</p>
</section>

</body>
</html>